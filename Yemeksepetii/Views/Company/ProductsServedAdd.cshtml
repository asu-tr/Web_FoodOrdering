@{
    ViewBag.Title = "ProductsServedAdd";
    Layout = "~/Views/Shared/MainLayout.cshtml";
}

@using Yemeksepetii.Models

<div class="row">
    <div class="col-md-12">
        <div class="block">
            <div class="block-heading">
                <h1 class="JustifyCenter">Yeni Ürün Satışı Ekle</h1>
            </div>
            <div class="block-content-outer">
                <div class="block-content-inner">
                    <form role="form" action="/Company/ProductsServedAdd" id="hidingSuccessForm" method="post">


                        <div class="form-group">
                            <label>Kategori Seçiniz:</label>
                            <select class="form-control" id="category">
                                @foreach (var cat in ViewBag.Categories)
                                {
                                    <option value="@cat.CategoryID">@cat.CategoryName</option>
                                }
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Ürün Seçiniz:</label>
                            <select class="form-control" name="ProductID" id="product">
                                <!-- ajax <3 -->
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Açıklama:</label>
                            <input type="text" class="form-control" name="Descriptionn" />
                        </div>

                        <div class="form-group">
                            <label>Fiyat:</label>
                            <input type="text" class="form-control" name="Price" />
                        </div>

                        <div class="form-group">
                            <label>Satıcı Kodu:</label>
                            <input value="@ViewBag.SellerID" name="SellerID" disabled />
                        </div>

                        <div class="form-group">
                            <button type="submit" class="btn btn-info">Ekle</button>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


@section scripts
    {
    <script src="~/Content/assets/js/required/jquery-1.11.1.min.js" type="text/javascript"></script>

    <script type="text/javascript">

        $(document).ready(function () {

            $('#category').on('change', function () {

                var id = $('#category option:selected').val();
                $.ajax({
                    type: 'GET',
                    data: { categoryID: id },
                    url: '@Url.Action("loadCategory", "Company")',
                    success: function (result) {

                        var s = '<option value="-1">Ürün seçiniz</option>';

                        for (var i = 0; i < result.length; i++) {
                            s += '<option value="' + result[i].ProductID + '">' + result[i].ProductName +'</option>';
                        }
                        $('#product').html(s);
                    },
                    error: function () {
                        alert('hata');
                    }
                });

            });

        });

    </script>
}